/* 备用播放 jx0 */
var thythemebjid=["#15E3CE","#28FF28","#B7DAFF"];
var thythemebj = thythemebjid[parseInt(Math.random()*thythemebjid.length)];
var thyurl = urld[1];
var thynext = next[1];

    var webdata = {
		set:function(key,val){
			window.sessionStorage.setItem(key,val);
		},
		get:function(key){
			return window.sessionStorage.getItem(key);
		},
		del:function(key){
			window.sessionStorage.removeItem(key);
		},
		clear:function(key){
			window.sessionStorage.clear();
		}
	};
    var type='normal';
    var live=false;
    if(thyurl.indexOf('.m3u8')>-1){
        type='hls';
        live=true;
    }
    else if(thyurl.indexOf('magnet:')>-1){
        type='webtorrent';
    }
    else if(thyurl.indexOf('.flv')>-1){
        type='flv';
    }
    else if(thyurl.indexOf('.mpd')>-1){
        type='dash';
    }
    else if(thyurl.indexOf('janan.net')>-1){
        type='auto';
        //type='hls';
    }
    else{
        type='auto';
    }

function GetQueryString(name)
	{
		 var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
		 var r = window.location.search.substr(1).match(reg);
		 if(r!=null)return  unescape(r[2]); return null;
	}
  if(thydomain.indexOf("type=h5")>0 || thydomain.indexOf("type=video")>0){
  var ismobile = navigator.userAgent.match(/iPad|iPhone|Android|Linux|iPod/i) != null; //H5
  }
  else if(thydomain.indexOf("type=dp")>0 || thydomain.indexOf("type=player")>0){
  var ismobile = navigator.userAgent.match(/iPad0|iPhone0|Android0|Linux0|iPod/i) != null; //dplayer
  }
  else{
  var ismobile = navigator.userAgent.match(/iPad|iPhone|Android0|Linux0|iPod/i) != null; //安卓:dplayer 苹果:H5
  }
  //
  if(ismobile){
	document.getElementById('playerCnt').innerHTML = '<video src="'+thyurl+'" controls="controls" autoplay="autoplay" width="100%" height="100%" x-webkit-airplay="allow" poster="'+thydata.pic+'"></video>';
      }else {
    var dp = new DPlayer({
        container: document.getElementById('playerCnt'),
        autoplay: true,
        screenshot: false,
        video: {
            url: thyurl,
            live: live,
            type:type,
			pic: thydata.pic,
        },
         volume: 1.0,
         preload: 'auto',
         theme: thythemebj,
         //theme: '#15E3CE',
		 logo: thydata.logo,
        contextmenu: [
        {
            text: '桃花源',
            link: 'https://www.baidu.com/',
        },
        ]
    });
       }
    if(thyurl.indexOf('.m3u8')>-1){
	dp.seek(webdata.get('pay'+thyurl));
	setInterval(function(){
		webdata.set('pay'+thyurl,dp.video.currentTime);
	},1000);
    }
    else if(thyurl.indexOf('.mp4')>-1){
	dp.seek(webdata.get('pay'+thyurl));
	setInterval(function(){
		webdata.set('pay'+thyurl,dp.video.currentTime);
	},1000);
    }
	else if(thyurl.indexOf('.flv')>-1){
	dp.seek(webdata.get('pay'+thyurl));
	setInterval(function(){
		webdata.set('pay'+thyurl,dp.video.currentTime);
	},1000);
    }
    else if(thyurl.indexOf('pstatp.com')>-1){
	dp.seek(webdata.get('pay'+thyurl));
	setInterval(function(){
		webdata.set('pay'+thyurl,dp.video.currentTime);
	},1000);
    }
	else{
    }
	//下一集
    if(thydomain.indexOf("next=")>0){
    dp.on('ended', function (){
    if(thynext!=''){
		dp.notice('正在自动为您播放下一集');
		top.location.href = thynext;
    }
    });
	}
    else{
    dp.on('ended', function (){
    if(thynext!=''){
		dp.notice('播放结束啦=。=');
    }
    });
    }
if ((navigator.userAgent.indexOf('MSIE') >= 0)
			|| (navigator.userAgent.indexOf('Trident') >= 0)) {
		alert("\u517c\u5bb9\u6a21\u5f0f\u0020\u6613\u4ea7\u751f\u64ad\u653e\u95ee\u9898\uff0c\u8bf7\u5c06\u6d4f\u89c8\u5668\u8bbe\u7f6e\u4e3a\u0020\u6781\u901f\u6a21\u5f0f\uff01");
     }
	try{
		//document.getElementById('playerCnt').style.height = parent.MacPlayer.Height + 'px';
	}
	catch(e){}
